(()=>{var C=(e,t)=>e[0]-t[0];function x(e){if(e.length===0)return e;e.sort(C);let t=[e[0]];for(let s=1;s<e.length;s++){let i=t.last();i[1]<e[s][0]?t.push(e[s]):i[1]<e[s][1]&&(i[1]=e[s][1])}return t}function P(e,t,s,i){if(e.length===0)return 0;let n=0;n-=Math.max(0,e.length-1),n-=i/10;let u=e[0][0];return n-=(e[e.length-1][1]-u+1-t)/100,n-=u/1e3,n-=s/1e4,n}function T(e,t){let s=t.toLowerCase(),i=[];for(let n of e){if(!n)continue;let u=!1,r=-1,l=n.length;for(;(r=s.indexOf(n,r))!==-1;)u=!0,i.push([r,r+l]),r+=l+1;if(!u)return null}return x(i)}function m(e,t,s){let i=T(e,s);return i?{score:P(i,t.length,s.length,0),matches:i}:null}function d(e,t,s,i=0){if(!s){e.appendText(t);return}let n=0;for(let u=0;n<t.length&&u<s.length;u++){let r=s[u],l=r[0]+i,a=r[1]+i;if(!(a<=0)){if(l>=t.length)break;l<0&&(l=0),l!==n&&e.appendText(t.substring(n,l)),e.createSpan({cls:"suggestion-highlight",text:t.substring(l,a)}),n=a}}n<t.length&&e.appendText(t.substring(n))}function S(e,t,s){return"https://raw.githubusercontent.com/"+e+"/"+(s||"HEAD")+"/"+t}var L=S("obsidianmd/obsidian-releases","community-plugins.json");async function M(){let e=await ajaxPromise({url:L}),t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Failed to parse community plugins.");return t}var I=S("obsidianmd/obsidian-releases","community-css-themes.json");(async()=>{let e=r=>{let l=r.length,a;for(;l!==0;)a=Math.floor(Math.random()*l),l--,[r[l],r[a]]=[r[a],r[l]];return r},t=fish(".plugins-container"),s=fish(".plugin-count"),i=fish(".plugin-search"),n=await M();s.setText(String(n.length)),e(n);function u(r){r=(r||"").trim();let l=r.toLowerCase().split(" ");t.empty();let a=[];for(let o of n){let c=-1/0,h,f,p;if(r){if(h=m(l,r,o.name),f=m(l,r,o.description),p=m(l,r,o.author),!h&&!f&&!p)continue;h&&(c=Math.max(h.score,c)),f&&(c=Math.max(f.score,c)),p&&(c=Math.max(p.score,c))}let b=createDiv({cls:"subfeature"},g=>{let y=g.createDiv({cls:"subfeature-title"});d(y,o.name,h?h.matches:null),g.createEl("p",{cls:"author-container",text:"By "},R=>{let E=R.createEl("span",{cls:"author-name"});d(E,o.author,p?p.matches:null)});let w=g.createEl("p",{cls:"u-muted"});d(w,o.description,f?f.matches:null),g.addEventListener("click",()=>{window.open("https://github.com/"+o.repo,"_blank")})});a.push({score:c,el:b})}a.sort(function(o,c){return o.score-c.score});for(let o of a)t.appendChild(o.el)}u(""),i.addEventListener("input",()=>{let r=i.value;u(r)})})();})();
