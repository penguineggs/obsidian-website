(()=>{var p=(e,t,u)=>new Promise((n,i)=>{var s=l=>{try{r(u.next(l))}catch(c){i(c)}},a=l=>{try{r(u.throw(l))}catch(c){i(c)}},r=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);r((u=u.apply(e,t)).next())});var M=(e,t)=>e[0]-t[0];function y(e){if(e.length===0)return e;e.sort(M);let t=[e[0]];for(let u=1;u<e.length;u++){let n=t.last();n[1]<e[u][0]?t.push(e[u]):n[1]<e[u][1]&&(n[1]=e[u][1])}return t}function L(e,t,u,n){if(e.length===0)return 0;let i=0;i-=Math.max(0,e.length-1),i-=n/10;let s=e[0][0];return i-=(e[e.length-1][1]-s+1-t)/100,i-=s/1e3,i-=u/1e4,i}function S(e,t){let u=t.toLowerCase(),n=[];for(let i of e){if(!i)continue;let s=!1,a=-1,r=i.length;for(;(a=u.indexOf(i,a))!==-1;)s=!0,n.push([a,a+r]),a+=r+1;if(!s)return null}return y(n)}function D(e,t,u){let n=S(e,u);return n?{score:L(n,t.length,u.length,0),matches:n}:null}function E(e,t,u=0){let n=document.createDocumentFragment();if(!t)return n.appendText(e),n;let i=0;for(let s=0;i<e.length&&s<t.length;s++){let a=t[s],r=a[0]+u,l=a[1]+u;if(!(l<=0)){if(r>=e.length)break;r<0&&(r=0),r!==i&&n.appendText(e.substring(i,r)),n.createSpan({cls:"suggestion-highlight",text:e.substring(r,l)}),i=l}}return i<e.length&&n.appendText(e.substring(i)),n}function C(e,t=0,u=!1){let n=null,i=null,s=null,a=0,r=function(){let o=i,h=s;return i=null,s=null,e.apply(o,h)},l=function(){if(a){let o=Date.now();if(o<a){n=window.setTimeout(l,a-o),a=0;return}}n=null,r()},c=function(...o){return i=this,s=o,n?u&&(a=Date.now()+t):n=window.setTimeout(l,t),c};return c.cancel=function(){return n&&(clearTimeout(n),n=null),c},c.run=function(){if(n)return clearTimeout(n),n=null,r()},c}var X=window.queueMicrotask||(e=>Promise.resolve().then(e));function T(e){if(!navigator.clipboard||!navigator.permissions){let t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(u){}document.body.removeChild(t);return}navigator.clipboard.writeText(e)}var k=/bot|crawl|spider/i.test(navigator.userAgent);function P(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function v(e,t,u){return u||(u=t+"s"),e===1?e+" "+t:P(e)+" "+u}var R="https://raw.githubusercontent.com/";function F(e,t,u){return R+e+"/"+(u||"HEAD")+"/"+t}var B=F("obsidianmd/obsidian-releases","community-plugins.json");function b(){return p(this,null,function*(){let e=yield ajaxPromise({url:B}),t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Failed to parse community plugins.");return t})}var H=F("obsidianmd/obsidian-releases","community-plugin-stats.json");function w(){return p(this,null,function*(){let e=yield ajaxPromise({url:H});try{return JSON.parse(e)}catch(t){throw t}})}var z=F("obsidianmd/obsidian-releases","community-css-themes.json");var d="";try{let e=new URLSearchParams(location.search);d=e.get("id"),d?setTimeout(()=>{location.href="obsidian://show-plugin?id="+encodeURIComponent(d)},0):d=e.get("search")}catch(e){console.error(e)}d=d||"";p(void 0,null,function*(){let e=r=>{let l=r.length,c;for(;l!==0;)c=Math.floor(Math.random()*l),l--,[r[l],r[c]]=[r[c],r[l]];return r},t=fish(".plugins-container"),u=fish(".plugin-count"),n=fish(".plugin-search"),i=yield b(),s=yield w();u.setText(String(i.length)),e(i);function a(r){r=(r||"").trim();let l=r.toLowerCase().split(" ");t.empty();let c=[];for(let o of i){let h=-1/0,f,m,g;if(r){if(f=D(l,r,o.name),m=D(l,r,o.description),g=D(l,r,o.author),!f&&!m&&!g&&r!==o.id.toLowerCase())continue;f&&(h=Math.max(f.score,h)),m&&(h=Math.max(m.score,h)),g&&(h=Math.max(g.score,h))}let x=s.hasOwnProperty(o.id)?s[o.id].downloads:0,A=jsx("div",{className:"subfeature"},jsx("div",{className:"subfeature-title u-center-text"},E(o.name,f?f.matches:null)),jsx("p",{className:"author-container u-center-text"},"By\xA0",jsx("span",{className:"author-name"},E(o.author,g?g.matches:null))),jsx("p",{className:"u-muted"},E(o.description,m?m.matches:null)),jsx("div",{className:"u-center-text"},jsx("button",{className:"mod-cta",onclick:()=>window.open("https://github.com/"+o.repo,"_blank")},"Learn more"),x?jsx("p",{className:"u-muted"},v(x,"download")):"",jsx("p",null,jsx("a",{className:"u-muted",href:"#",onclick:()=>location.href="obsidian://show-plugin?id="+encodeURIComponent(o.id)},"Open in Obsidian"),"\xA0",jsx("a",{className:"u-muted",href:"#",onclick:()=>T("https://obsidian.md/plugins?id="+encodeURIComponent(o.id))},"Copy link to share"))));c.push({score:h,el:A})}c.sort(function(o,h){return o.score-h.score});for(let o of c)t.appendChild(o.el)}n.value=d,a(d),n.addEventListener("input",C(()=>{let r=n.value;a(r),r!==""?window.history.replaceState(null,null,`?search=${r}`):window.history.replaceState(null,null,window.location.pathname)},100))});})();
