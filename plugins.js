(()=>{var R=(e,t)=>e[0]-t[0];function v(e){if(e.length===0)return e;e.sort(R);let t=[e[0]];for(let r=1;r<e.length;r++){let u=t.last();u[1]<e[r][0]?t.push(e[r]):u[1]<e[r][1]&&(u[1]=e[r][1])}return t}function H(e,t,r,u){if(e.length===0)return 0;let i=0;i-=Math.max(0,e.length-1),i-=u/10;let s=e[0][0];return i-=(e[e.length-1][1]-s+1-t)/100,i-=s/1e3,i-=r/1e4,i}function I(e,t){let r=t.toLowerCase(),u=[];for(let i of e){if(!i)continue;let s=!1,l=-1,n=i.length;for(;(l=r.indexOf(i,l))!==-1;)s=!0,u.push([l,l+n]),l+=n+1;if(!s)return null}return v(u)}function x(e,t,r){let u=I(e,r);return u?{score:H(u,t.length,r.length,0),matches:u}:null}function y(e,t,r,u=0){if(!r){e.appendText(t);return}let i=0;for(let s=0;i<t.length&&s<r.length;s++){let l=r[s],n=l[0]+u,a=l[1]+u;if(!(a<=0)){if(n>=t.length)break;n<0&&(n=0),n!==i&&e.appendText(t.substring(i,n)),e.createSpan({cls:"suggestion-highlight",text:t.substring(n,a)}),i=a}}i<t.length&&e.appendText(t.substring(i))}function b(e,t=0,r=!1){let u=null,i=null,s=null,l=0,n=function(){if(l){let c=Date.now();if(c<l){u=window.setTimeout(n,l-c),l=0;return}}u=null;let d=i,o=s;i=null,s=null,e.apply(d,o)},a=function(...d){i=this,s=d,u?r&&(l=Date.now()+t):u=window.setTimeout(n,t)};return a.cancel=function(){return u&&(clearTimeout(u),u=null),a},a}function T(e){if(!navigator.clipboard||!navigator.permissions){let t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(r){}document.body.removeChild(t);return}navigator.clipboard.writeText(e)}var q=window.requestIdleCallback;var z=/bot|crawl|spider/i.test(navigator.userAgent);function _(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function w(e,t,r){return r||(r=t+"s"),e===1?e+" "+t:_(e)+" "+r}function C(e,t,r){return"https://raw.githubusercontent.com/"+e+"/"+(r||"HEAD")+"/"+t}var Y=C("obsidianmd/obsidian-releases","community-plugins.json");async function M(){let e=await ajaxPromise({url:Y}),t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Failed to parse community plugins.");return t}var N=C("obsidianmd/obsidian-releases","community-plugin-stats.json");async function L(){let e=await ajaxPromise({url:N});try{return JSON.parse(e)}catch(t){throw t}}var J=C("obsidianmd/obsidian-releases","community-css-themes.json");var h="";try{let e=new URLSearchParams(location.search);h=e.get("id"),h?setTimeout(()=>{location.href="obsidian://show-plugin?id="+encodeURIComponent(h)},0):h=e.get("search")}catch(e){console.error(e)}h=h||"";(async()=>{let e=n=>{let a=n.length,d;for(;a!==0;)d=Math.floor(Math.random()*a),a--,[n[a],n[d]]=[n[d],n[a]];return n},t=fish(".plugins-container"),r=fish(".plugin-count"),u=fish(".plugin-search"),i=await M(),s=await L();r.setText(String(i.length)),e(i);function l(n){n=(n||"").trim();let a=n.toLowerCase().split(" ");t.empty();let d=[];for(let o of i){let c=-1/0,m,g,p;if(n){if(m=x(a,n,o.name),g=x(a,n,o.description),p=x(a,n,o.author),!m&&!g&&!p&&n!==o.id.toLowerCase())continue;m&&(c=Math.max(m.score,c)),g&&(c=Math.max(g.score,c)),p&&(c=Math.max(p.score,c))}let S=createDiv({cls:"subfeature"},F=>{let P=F.createDiv({cls:"subfeature-title u-center-text"});y(P,o.name,m?m.matches:null),F.createEl("p",{cls:"author-container u-center-text",text:"By "},D=>{let f=D.createEl("span",{cls:"author-name"});y(f,o.author,p?p.matches:null)});let A=s.hasOwnProperty(o.id)?s[o.id].downloads:0,B=F.createEl("p",{cls:"u-muted"});y(B,o.description,g?g.matches:null),F.createEl("div",{cls:"u-center-text"},D=>{D.createEl("button",{cls:"mod-cta",text:"Learn more"},f=>{f.addEventListener("click",()=>{window.open("https://github.com/"+o.repo,"_blank")})}),A&&D.createEl("p",{cls:"u-muted",text:`${w(A,"download")}`}),D.createEl("p",{},f=>{f.createEl("a",{cls:"u-muted",text:"Open in Obsidian"},E=>{E.setAttribute("href","#"),E.addEventListener("click",()=>{location.href="obsidian://show-plugin?id="+encodeURIComponent(o.id)})}),f.appendText(" "),f.createEl("a",{cls:"u-muted",text:"Copy link to share"},E=>{E.setAttribute("href","#"),E.addEventListener("click",()=>{T("https://obsidian.md/plugins?id="+encodeURIComponent(o.id))})})})})});d.push({score:c,el:S})}d.sort(function(o,c){return o.score-c.score});for(let o of d)t.appendChild(o.el)}u.value=h,l(h),u.addEventListener("input",b(()=>{let n=u.value;l(n),n!==""?window.history.replaceState(null,null,`?search=${n}`):window.history.replaceState(null,null,window.location.pathname)},100))})();})();
