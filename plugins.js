(()=>{var P=(e,t)=>e[0]-t[0];function M(e){if(e.length===0)return e;e.sort(P);let t=[e[0]];for(let s=1;s<e.length;s++){let l=t.last();l[1]<e[s][0]?t.push(e[s]):l[1]<e[s][1]&&(l[1]=e[s][1])}return t}function L(e,t,s,l){if(e.length===0)return 0;let n=0;n-=Math.max(0,e.length-1),n-=l/10;let a=e[0][0];return n-=(e[e.length-1][1]-a+1-t)/100,n-=a/1e3,n-=s/1e4,n}function T(e,t){let s=t.toLowerCase(),l=[];for(let n of e){if(!n)continue;let a=!1,r=-1,i=n.length;for(;(r=s.indexOf(n,r))!==-1;)a=!0,l.push([r,r+i]),r+=i+1;if(!a)return null}return M(l)}function d(e,t,s){let l=T(e,s);return l?{score:L(l,t.length,s.length,0),matches:l}:null}function S(e,t,s,l=0){if(!s){e.appendText(t);return}let n=0;for(let a=0;n<t.length&&a<s.length;a++){let r=s[a],i=r[0]+l,o=r[1]+l;if(!(o<=0)){if(i>=t.length)break;i<0&&(i=0),i!==n&&e.appendText(t.substring(n,i)),e.createSpan({cls:"suggestion-highlight",text:t.substring(i,o)}),n=o}}n<t.length&&e.appendText(t.substring(n))}function x(e,t,s){return"https://raw.githubusercontent.com/"+e+"/"+(s||"HEAD")+"/"+t}var U=x("obsidianmd/obsidian-releases","community-plugins.json");async function b(){let e=await ajaxPromise({url:U}),t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Failed to parse community plugins.");return t}var N=x("obsidianmd/obsidian-releases","community-css-themes.json");var h="";try{let e=new URLSearchParams(location.search);h=e.get("id"),h?location.href="obsidian://show-plugin?id="+encodeURIComponent(h):h=e.get("search")}catch(e){console.error(e)}h=h||"";(async()=>{let e=r=>{let i=r.length,o;for(;i!==0;)o=Math.floor(Math.random()*i),i--,[r[i],r[o]]=[r[o],r[i]];return r},t=fish(".plugins-container"),s=fish(".plugin-count"),l=fish(".plugin-search"),n=await b();s.setText(String(n.length)),e(n);function a(r){r=(r||"").trim();let i=r.toLowerCase().split(" ");t.empty();let o=[];for(let u of n){let c=-1/0,f,p,g;if(r){if(f=d(i,r,u.name),p=d(i,r,u.description),g=d(i,r,u.author),!f&&!p&&!g&&r!==u.id.toLowerCase())continue;f&&(c=Math.max(f.score,c)),p&&(c=Math.max(p.score,c)),g&&(c=Math.max(g.score,c))}let w=createDiv({cls:"subfeature"},m=>{let y=m.createDiv({cls:"subfeature-title"});S(y,u.name,f?f.matches:null),m.createEl("p",{cls:"author-container",text:"By "},E=>{let C=E.createEl("span",{cls:"author-name"});S(C,u.author,g?g.matches:null)});let R=m.createEl("p",{cls:"u-muted"});S(R,u.description,p?p.matches:null),m.addEventListener("click",()=>{window.open("https://github.com/"+u.repo,"_blank")})});o.push({score:c,el:w})}o.sort(function(u,c){return u.score-c.score});for(let u of o)t.appendChild(u.el)}l.value=h,a(h),l.addEventListener("input",()=>{let r=l.value;a(r)})})();})();
