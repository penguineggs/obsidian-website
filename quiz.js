(()=>{var A=(n,a,m)=>new Promise((G,x)=>{var L=u=>{try{S(m.next(u))}catch(U){x(U)}},w=u=>{try{S(m.throw(u))}catch(U){x(U)}},S=u=>u.done?G(u.value):Promise.resolve(u.value).then(L,w);S((m=m.apply(n,a)).next())});var $="https://raw.githubusercontent.com/";function g(n,a,m){return $+n+"/"+(m||"HEAD")+"/"+a}var j=g("obsidianmd/obsidian-releases","community-plugins.json");function O(){return A(this,null,function*(){let n=yield ajaxPromise({url:j}),a=JSON.parse(n);if(!Array.isArray(a))throw new Error("Failed to parse community plugins.");return a})}var K=g("obsidianmd/obsidian-releases","community-plugin-stats.json");var W=g("obsidianmd/obsidian-releases","community-css-themes.json");function P(){return A(this,null,function*(){let n=yield ajaxPromise({url:W}),a=JSON.parse(n);if(!Array.isArray(a))throw new Error("Failed to parse community themes.");return a})}A(void 0,null,function*(){function n(p){return Math.floor(Math.random()*p.length)}let a="GUESS_NAME_BY_DESC",m="GUESS_DESC_BY_NAME",G="GUESS_AUTHOR_BY_NAME",x="GUESS_AUTHOR_BY_DESC",L=[a,m,G,x],w="GUESS_NAME_BY_IMAGE",S="GUESS_DARK_MODE_BY_NAME",u="GUESS_LIGHT_MODE_BY_NAME",U="GUESS_AUTHOR_BY_IMAGE",v=[w,S,u,U],Y=fish(".quiz-area"),_=fish(".quiz-question"),l=fish(".quiz-options"),c=fish(".quiz-result"),q=fish(".quiz-result-text"),z=fish(".current-score"),C=fish(".current-question"),y=0,R=0,B=15;c.addEventListener("click",()=>{b()});let D=fish(".js-start-quiz");D.addEventListener("click",()=>{b()});let T=yield O(),I=yield P(),h=p=>{q.setText(`\u{1F389} Correct! You mined ${p} crystal(s)!`),c.removeClasses(["mod-error","mod-end"]),c.addClass("mod-success"),c.show(),y+=p||1},d=p=>{q.setText(`\u{1F645} Wrong! The correct answer is "${p}".`),c.removeClasses(["mod-success","mod-end"]),c.addClass("mod-error"),c.show()},k=()=>{q.innerHTML=`That was the last question! Your final score is ${y}.<br>Click to play again!`,c.removeClasses(["mod-error","mod-success"]),c.addClass("mod-end"),c.show()},b=()=>{if(R++,C.setText(String(R)),z.setText(String(y)),R>B){k(),y=0,R=0;return}Y.show(),D.hide(),c.hide();let p=Math.random()>.5;if(l.empty(),p){let E=L[n(L)],s=[],f=4,M=4;for(;M>0;){let e=n(T);s.contains(e)||(s.push(e),M-=1)}let H=n(s),t=T[s[H]];if(E===x){_.innerHTML=`Who is the author of the plugin that does this?<br>"${t.description}"`;for(let e=0;e<f;e++){let i=s[e],r=T[i].author;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.author?h(4):d(t.author)})})}}else if(E===G){_.innerHTML=`Who is the author of the "${t.name}" plugin?`;for(let e=0;e<f;e++){let i=s[e],r=T[i].author;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.author?h(3):d(t.author)})})}}else if(E===m){_.innerHTML=`What does the "${t.name}" plugin do?`;for(let e=0;e<f;e++){let i=s[e],r=T[i].description;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.description?h(1):d(t.description)})})}}else if(E===a){_.innerHTML=`What's the name of the plugin that does this?<br>"${t.description}"`;for(let e=0;e<f;e++){let i=s[e],r=T[i].name;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.name?h(2):d(t.name)})})}}}else{let E=v[n(v)],s=[],f=4,M=4;for(;M>0;){let e=n(I);s.contains(e)||(s.push(e),M-=1)}let H=n(s),t=I[s[H]];if(E===U){let e=g(t.repo,t.screenshot,t.branch);_.innerHTML=`Who is the author of this theme?<br><img src="${e}">`;for(let i=0;i<f;i++){let r=s[i],o=I[r].author;l.createDiv({cls:"quiz-option",text:o},N=>{N.addEventListener("click",()=>{o===t.author?h(3):d(t.author)})})}}else if(E===S){_.innerHTML=`Does the "${t.name}" theme have a dark mode?`;let e=t.modes.contains("dark");l.createDiv({cls:"quiz-option",text:"Yes"},i=>{i.addEventListener("click",()=>{e?h(2):d("no")})}),l.createDiv({cls:"quiz-option",text:"No"},i=>{i.addEventListener("click",()=>{e?d("yes"):h(2)})})}else if(E===u){_.innerHTML=`Does the "${t.name}" theme have a light mode?`;let e=t.modes.contains("light");l.createDiv({cls:"quiz-option",text:"Yes"},i=>{i.addEventListener("click",()=>{e?h(2):d("no")})}),l.createDiv({cls:"quiz-option",text:"No"},i=>{i.addEventListener("click",()=>{e?d("yes"):h(2)})})}else if(E===w){let e=g(t.repo,t.screenshot,t.branch);_.innerHTML=`What's the name of this theme?<br><img src="${e}">`;for(let i=0;i<f;i++){let r=s[i],o=I[r].name;l.createDiv({cls:"quiz-option",text:o},N=>{N.addEventListener("click",()=>{o===t.name?h(1):d(t.name)})})}}}}});})();
