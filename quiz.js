(()=>{var y=(r,n,d)=>new Promise((G,M)=>{var L=c=>{try{g(d.next(c))}catch(T){M(T)}},A=c=>{try{g(d.throw(c))}catch(T){M(T)}},g=c=>c.done?G(c.value):Promise.resolve(c.value).then(L,A);g((d=d.apply(r,n)).next())});function S(r,n,d){return"https://raw.githubusercontent.com/"+r+"/"+(d||"HEAD")+"/"+n}var B=S("obsidianmd/obsidian-releases","community-plugins.json");function I(){return y(this,null,function*(){let r=yield ajaxPromise({url:B}),n=JSON.parse(r);if(!Array.isArray(n))throw new Error("Failed to parse community plugins.");return n})}var J=S("obsidianmd/obsidian-releases","community-plugin-stats.json");var $=S("obsidianmd/obsidian-releases","community-css-themes.json");function O(){return y(this,null,function*(){let r=yield ajaxPromise({url:$}),n=JSON.parse(r);if(!Array.isArray(n))throw new Error("Failed to parse community themes.");return n})}y(void 0,null,function*(){function r(f){return Math.floor(Math.random()*f.length)}let n="GUESS_NAME_BY_DESC",d="GUESS_DESC_BY_NAME",G="GUESS_AUTHOR_BY_NAME",M="GUESS_AUTHOR_BY_DESC",L=[n,d,G,M],A="GUESS_NAME_BY_IMAGE",g="GUESS_DARK_MODE_BY_NAME",c="GUESS_LIGHT_MODE_BY_NAME",T="GUESS_AUTHOR_BY_IMAGE",b=[A,g,c,T],Y=fish(".quiz-area"),_=fish(".quiz-question"),o=fish(".quiz-options"),a=fish(".quiz-result"),v=fish(".quiz-result-text"),z=fish(".current-score"),C=fish(".current-question"),w=0,q=0,R=15;a.addEventListener("click",()=>{P()});let H=fish(".js-start-quiz");H.addEventListener("click",()=>{P()});let x=yield I(),N=yield O(),u=f=>{v.setText(`\u{1F389} Correct! You mined ${f} crystal(s)!`),a.removeClasses(["mod-error","mod-end"]),a.addClass("mod-success"),a.show(),w+=f||1},h=f=>{v.setText(`\u{1F645} Wrong! The correct answer is "${f}".`),a.removeClasses(["mod-success","mod-end"]),a.addClass("mod-error"),a.show()},k=()=>{v.innerHTML=`That was the last question! Your final score is ${w}.<br>Click to play again!`,a.removeClasses(["mod-error","mod-success"]),a.addClass("mod-end"),a.show()},P=()=>{if(q++,C.setText(String(q)),z.setText(String(w)),q>R){k(),w=0,q=0;return}Y.show(),H.hide(),a.hide();let f=Math.random()>.5;if(o.empty(),f){let m=L[r(L)],s=[],p=4,U=4;for(;U>0;){let e=r(x);s.contains(e)||(s.push(e),U-=1)}let E=r(s),i=x[s[E]];if(m===M){_.innerHTML=`Who is the author of the plugin that does this?<br>"${i.description}"`;for(let e=0;e<p;e++){let t=s[e];o.createDiv({cls:"quiz-option",text:x[t].author},l=>{l.addEventListener("click",()=>{e===E?u(4):h(i.author)})})}}else if(m===G){_.innerHTML=`Who is the author of the "${i.name}" plugin?`;for(let e=0;e<p;e++){let t=s[e];o.createDiv({cls:"quiz-option",text:x[t].author},l=>{l.addEventListener("click",()=>{e===E?u(3):h(i.author)})})}}else if(m===d){_.innerHTML=`What does the "${i.name}" plugin do?`;for(let e=0;e<p;e++){let t=s[e];o.createDiv({cls:"quiz-option",text:x[t].description},l=>{l.addEventListener("click",()=>{e===E?u(1):h(i.description)})})}}else if(m===n){_.innerHTML=`What's the name of the plugin that does this?<br>"${i.description}"`;for(let e=0;e<p;e++){let t=s[e];o.createDiv({cls:"quiz-option",text:x[t].name},l=>{l.addEventListener("click",()=>{e===E?u(2):h(i.name)})})}}}else{let m=b[r(b)],s=[],p=4,U=4;for(;U>0;){let e=r(N);s.contains(e)||(s.push(e),U-=1)}let E=r(s),i=N[s[E]];if(m===T){let e=S(i.repo,i.screenshot,i.branch);_.innerHTML=`Who is the author of this theme?<br><img src="${e}">`;for(let t=0;t<p;t++){let l=s[t];o.createDiv({cls:"quiz-option",text:N[l].author},D=>{D.addEventListener("click",()=>{t===E?u(3):h(i.author)})})}}else if(m===g){_.innerHTML=`Does the "${i.name}" theme have a dark mode?`;let e=i.modes.contains("dark");o.createDiv({cls:"quiz-option",text:"Yes"},t=>{t.addEventListener("click",()=>{e?u(2):h("no")})}),o.createDiv({cls:"quiz-option",text:"No"},t=>{t.addEventListener("click",()=>{e?h("yes"):u(2)})})}else if(m===c){_.innerHTML=`Does the "${i.name}" theme have a light mode?`;let e=i.modes.contains("light");o.createDiv({cls:"quiz-option",text:"Yes"},t=>{t.addEventListener("click",()=>{e?u(2):h("no")})}),o.createDiv({cls:"quiz-option",text:"No"},t=>{t.addEventListener("click",()=>{e?h("yes"):u(2)})})}else if(m===A){let e=S(i.repo,i.screenshot,i.branch);_.innerHTML=`What's the name of this theme?<br><img src="${e}">`;for(let t=0;t<p;t++){let l=s[t];o.createDiv({cls:"quiz-option",text:N[l].name},D=>{D.addEventListener("click",()=>{t===E?u(1):h(i.name)})})}}}}});})();
