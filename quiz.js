(()=>{var A=(n,a,m)=>new Promise((w,M)=>{var y=u=>{try{g(m.next(u))}catch(T){M(T)}},G=u=>{try{g(m.throw(u))}catch(T){M(T)}},g=u=>u.done?w(u.value):Promise.resolve(u.value).then(y,G);g((m=m.apply(n,a)).next())});function S(n,a,m){return"https://raw.githubusercontent.com/"+n+"/"+(m||"HEAD")+"/"+a}var $=S("obsidianmd/obsidian-releases","community-plugins.json");function O(){return A(this,null,function*(){let n=yield ajaxPromise({url:$}),a=JSON.parse(n);if(!Array.isArray(a))throw new Error("Failed to parse community plugins.");return a})}var F=S("obsidianmd/obsidian-releases","community-plugin-stats.json");var j=S("obsidianmd/obsidian-releases","community-css-themes.json");function Y(){return A(this,null,function*(){let n=yield ajaxPromise({url:j}),a=JSON.parse(n);if(!Array.isArray(a))throw new Error("Failed to parse community themes.");return a})}A(void 0,null,function*(){function n(f){return Math.floor(Math.random()*f.length)}let a="GUESS_NAME_BY_DESC",m="GUESS_DESC_BY_NAME",w="GUESS_AUTHOR_BY_NAME",M="GUESS_AUTHOR_BY_DESC",y=[a,m,w,M],G="GUESS_NAME_BY_IMAGE",g="GUESS_DARK_MODE_BY_NAME",u="GUESS_LIGHT_MODE_BY_NAME",T="GUESS_AUTHOR_BY_IMAGE",H=[G,g,u,T],z=fish(".quiz-area"),_=fish(".quiz-question"),l=fish(".quiz-options"),c=fish(".quiz-result"),v=fish(".quiz-result-text"),C=fish(".current-score"),R=fish(".current-question"),L=0,q=0,k=15;c.addEventListener("click",()=>{I()});let P=fish(".js-start-quiz");P.addEventListener("click",()=>{I()});let x=yield O(),N=yield Y(),h=f=>{v.setText(`\u{1F389} Correct! You mined ${f} crystal(s)!`),c.removeClasses(["mod-error","mod-end"]),c.addClass("mod-success"),c.show(),L+=f||1},d=f=>{v.setText(`\u{1F645} Wrong! The correct answer is "${f}".`),c.removeClasses(["mod-success","mod-end"]),c.addClass("mod-error"),c.show()},B=()=>{v.innerHTML=`That was the last question! Your final score is ${L}.<br>Click to play again!`,c.removeClasses(["mod-error","mod-success"]),c.addClass("mod-end"),c.show()},I=()=>{if(q++,R.setText(String(q)),C.setText(String(L)),q>k){B(),L=0,q=0;return}z.show(),P.hide(),c.hide();let f=Math.random()>.5;if(l.empty(),f){let E=y[n(y)],s=[],p=4,U=4;for(;U>0;){let e=n(x);s.contains(e)||(s.push(e),U-=1)}let D=n(s),t=x[s[D]];if(E===M){_.innerHTML=`Who is the author of the plugin that does this?<br>"${t.description}"`;for(let e=0;e<p;e++){let i=s[e],r=x[i].author;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.author?h(4):d(t.author)})})}}else if(E===w){_.innerHTML=`Who is the author of the "${t.name}" plugin?`;for(let e=0;e<p;e++){let i=s[e],r=x[i].author;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.author?h(3):d(t.author)})})}}else if(E===m){_.innerHTML=`What does the "${t.name}" plugin do?`;for(let e=0;e<p;e++){let i=s[e],r=x[i].description;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.description?h(1):d(t.description)})})}}else if(E===a){_.innerHTML=`What's the name of the plugin that does this?<br>"${t.description}"`;for(let e=0;e<p;e++){let i=s[e],r=x[i].name;l.createDiv({cls:"quiz-option",text:r},o=>{o.addEventListener("click",()=>{r===t.name?h(2):d(t.name)})})}}}else{let E=H[n(H)],s=[],p=4,U=4;for(;U>0;){let e=n(N);s.contains(e)||(s.push(e),U-=1)}let D=n(s),t=N[s[D]];if(E===T){let e=S(t.repo,t.screenshot,t.branch);_.innerHTML=`Who is the author of this theme?<br><img src="${e}">`;for(let i=0;i<p;i++){let r=s[i],o=N[r].author;l.createDiv({cls:"quiz-option",text:o},b=>{b.addEventListener("click",()=>{o===t.author?h(3):d(t.author)})})}}else if(E===g){_.innerHTML=`Does the "${t.name}" theme have a dark mode?`;let e=t.modes.contains("dark");l.createDiv({cls:"quiz-option",text:"Yes"},i=>{i.addEventListener("click",()=>{e?h(2):d("no")})}),l.createDiv({cls:"quiz-option",text:"No"},i=>{i.addEventListener("click",()=>{e?d("yes"):h(2)})})}else if(E===u){_.innerHTML=`Does the "${t.name}" theme have a light mode?`;let e=t.modes.contains("light");l.createDiv({cls:"quiz-option",text:"Yes"},i=>{i.addEventListener("click",()=>{e?h(2):d("no")})}),l.createDiv({cls:"quiz-option",text:"No"},i=>{i.addEventListener("click",()=>{e?d("yes"):h(2)})})}else if(E===G){let e=S(t.repo,t.screenshot,t.branch);_.innerHTML=`What's the name of this theme?<br><img src="${e}">`;for(let i=0;i<p;i++){let r=s[i],o=N[r].name;l.createDiv({cls:"quiz-option",text:o},b=>{b.addEventListener("click",()=>{o===t.name?h(1):d(t.name)})})}}}}});})();
